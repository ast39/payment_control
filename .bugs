{
    "stats": {
        "total_payments": 15,
        "pending_payments": 2,
        "paid_payments": 13,
        "overdue_payments": 0,
        "total_amount": 211454,
        "paid_amount": 200131,
        "pending_amount": 11323,
        "overdue_amount": 0
    },
    "upcoming_payments": [
        {
            "id": 16,
            "user_id": 2,
            "title": "Почта",
            "description": "Брал на первый мот (Почта банк - мать)",
            "amount": 7343,
            "currency_id": 1,
            "category_id": 2,
            "payment_method_id": 3,
            "payment_date": null,
            "due_date": "2025-08-23",
            "created_at": "2025-08-20 20:46:09",
            "currency_name": "Российский рубль",
            "currency_code": "RUB",
            "currency_symbol": "₽",
            "category_name": "Кредиты",
            "category_color": "#EF4444",
            "payment_method_name": "Перевод"
        },
        {
            "id": 47,
            "user_id": 2,
            "title": "iPhone",
            "description": "Альфа банк",
            "amount": 3980,
            "currency_id": 1,
            "category_id": 2,
            "payment_method_id": 3,
            "payment_date": null,
            "due_date": "2025-08-28",
            "created_at": "2025-08-21 13:33:20",
            "currency_name": "Российский рубль",
            "currency_code": "RUB",
            "currency_symbol": "₽",
            "category_name": "Кредиты",
            "category_color": "#EF4444",
            "payment_method_name": "Перевод"
        }
    ],
    "overdue_payments": [],
    "completed_payments": [
        {
            "id": 14,
            "user_id": 2,
            "title": "Финик",
            "description": "Брали на Финик (Сбер)",
            "amount": 10500,
            "currency_id": 1,
            "category_id": 2,
            "payment_method_id": 3,
            "payment_date": "2025-08-12",
            "due_date": "2025-08-26",
            "created_at": "2025-08-20 20:44:50",
            "currency_name": "Российский рубль",
            "currency_code": "RUB",
            "currency_symbol": "₽",
            "category_name": "Кредиты",
            "category_color": "#EF4444",
            "payment_method_name": "Перевод"
        },
        {
            "id": 15,
            "user_id": 2,
            "title": "Exeed",
            "description": "Автокредит (ОТП банк Наташа)",
            "amount": 26300,
            "currency_id": 1,
            "category_id": 2,
            "payment_method_id": 3,
            "payment_date": "2025-08-19",
            "due_date": "2025-08-25",
            "created_at": "2025-08-20 20:45:24",
            "currency_name": "Российский рубль",
            "currency_code": "RUB",
            "currency_symbol": "₽",
            "category_name": "Кредиты",
            "category_color": "#EF4444",
            "payment_method_name": "Перевод"
        },
        {
            "id": 12,
            "user_id": 2,
            "title": "ВТБ Наташа",
            "description": "Рефинансирование (Наташа ВТБ)",
            "amount": 28251,
            "currency_id": 1,
            "category_id": 2,
            "payment_method_id": 3,
            "payment_date": "2025-08-08",
            "due_date": "2025-08-23",
            "created_at": "2025-08-20 20:42:38",
            "currency_name": "Российский рубль",
            "currency_code": "RUB",
            "currency_symbol": "₽",
            "category_name": "Кредиты",
            "category_color": "#EF4444",
            "payment_method_name": "Перевод"
        },
        {
            "id": 11,
            "user_id": 2,
            "title": "МТС 700",
            "description": "Рефинансирование 700к (МТС банк)",
            "amount": 21337,
            "currency_id": 1,
            "category_id": 2,
            "payment_method_id": 3,
            "payment_date": "2025-08-15",
            "due_date": "2025-08-22",
            "created_at": "2025-08-20 20:42:02",
            "currency_name": "Российский рубль",
            "currency_code": "RUB",
            "currency_symbol": "₽",
            "category_name": "Кредиты",
            "category_color": "#EF4444",
            "payment_method_name": "Перевод"
        },
        {
            "id": 13,
            "user_id": 2,
            "title": "Наташа Тинек",
            "description": "Рефинансирование (Наташа Т-банк)",
            "amount": 21740,
            "currency_id": 1,
            "category_id": 2,
            "payment_method_id": 3,
            "payment_date": "2025-08-14",
            "due_date": "2025-08-22",
            "created_at": "2025-08-20 20:43:14",
            "currency_name": "Российский рубль",
            "currency_code": "RUB",
            "currency_symbol": "₽",
            "category_name": "Кредиты",
            "category_color": "#EF4444",
            "payment_method_name": "Перевод"
        },
        {
            "id": 9,
            "user_id": 2,
            "title": "МТС 300",
            "description": "Рефинансирование 300к (МТС банк)",
            "amount": 8781,
            "currency_id": 1,
            "category_id": 2,
            "payment_method_id": 3,
            "payment_date": "2025-08-04",
            "due_date": "2025-08-16",
            "created_at": "2025-08-20 20:41:05",
            "currency_name": "Российский рубль",
            "currency_code": "RUB",
            "currency_symbol": "₽",
            "category_name": "Кредиты",
            "category_color": "#EF4444",
            "payment_method_name": "Перевод"
        },
        {
            "id": 10,
            "user_id": 2,
            "title": "МТС 400",
            "description": "Рефинансирование 400к (МТС банк)",
            "amount": 10802,
            "currency_id": 1,
            "category_id": 2,
            "payment_method_id": 3,
            "payment_date": "2025-08-04",
            "due_date": "2025-08-14",
            "created_at": "2025-08-20 20:41:29",
            "currency_name": "Российский рубль",
            "currency_code": "RUB",
            "currency_symbol": "₽",
            "category_name": "Кредиты",
            "category_color": "#EF4444",
            "payment_method_name": "Перевод"
        },
        {
            "id": 8,
            "user_id": 2,
            "title": "Пашка",
            "description": "Пашкин кредит (АЛьфа банк)",
            "amount": 26900,
            "currency_id": 1,
            "category_id": 2,
            "payment_method_id": 3,
            "payment_date": "2025-08-03",
            "due_date": "2025-08-11",
            "created_at": "2025-08-20 20:40:23",
            "currency_name": "Российский рубль",
            "currency_code": "RUB",
            "currency_symbol": "₽",
            "category_name": "Кредиты",
            "category_color": "#EF4444",
            "payment_method_name": "Перевод"
        },
        {
            "id": 7,
            "user_id": 2,
            "title": "Nissan",
            "description": "Автокредит (Сбербанк)",
            "amount": 13000,
            "currency_id": 1,
            "category_id": 2,
            "payment_method_id": 3,
            "payment_date": "2025-08-02",
            "due_date": "2025-08-07",
            "created_at": "2025-08-20 20:39:17",
            "currency_name": "Российский рубль",
            "currency_code": "RUB",
            "currency_symbol": "₽",
            "category_name": "Кредиты",
            "category_color": "#EF4444",
            "payment_method_name": "Перевод"
        },
        {
            "id": 49,
            "user_id": 2,
            "title": "Cursor",
            "description": "Подписка AI агента",
            "amount": 20,
            "currency_id": 2,
            "category_id": 3,
            "payment_method_id": 2,
            "payment_date": "2025-08-06",
            "due_date": "2025-08-06",
            "created_at": "2025-08-21 13:44:07",
            "currency_name": "Доллар США",
            "currency_code": "USD",
            "currency_symbol": "$",
            "category_name": "Подписки",
            "category_color": "#3B82F6",
            "payment_method_name": "Карта"
        }
    ]
}

stats неправильно считает total_amount, paid_amount, pending_amount и overdue_amount.
Надо каждый этот ключ сделать массивом и внутри считать по currency.
То есть различать суммы по валютам.
И выводить в шапке дашборда следовательно суммы по валютам